<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <link href="./static/css/base.css" rel="stylesheet"> -->
    <link href="./static/css/element@2.2.6.css" rel="stylesheet">
    <script src="./static/js/vue@3.2.36.js"></script>
    <script src="./static/js/elementPlus@2.2.6.js"></script>
    <script src="./static/js/elementPlus-zhcn.js"></script>
    <script src="./static/js/elementPlusIcon@2.0.4.js"></script>
    <script src="./static/js/init.js"></script>
    <title>CatToolå¯¼èˆª</title>
    <link href="./static/css/common.css" rel="stylesheet" type="text/css"/>
    <link rel="stylesheet" href="./static/css/fonts/iconfont.css">
    <link rel="stylesheet" href="./static/css/iconfonts/iconfont.css">
    <link href="./static/css/help.css" rel="stylesheet" type="text/css"/>
    <link rel="shortcut icon" href="imgs/favicon.ico">
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
</head>

<body>
    <div id="app">
        <div class="navheader">
            <div class="logobox" >
                <!-- <a href=""><img src="./static/img/navbar.png" alt=""></a> -->
                <h1><span>cat </span> tool 
                    <el-input v-model="input" style="width: 240px;margin-left: 10px;" placeholder="æ¨¡ç³Šæ£€ç´¢" @input="handleSearch" clearable></el-input>
                    <el-button @click="toggleTheme" style="margin-left: 10px;">
                        {{ isDark ? 'â˜€ï¸' : 'ğŸŒ™' }}
                    </el-button>
                    <span style="margin-left: 20px;font-size: 14px;font-weight: 400;color: #aaa;" v-if="searchlists.length">å…± {{searchlists.length}} ä¸ªæ”¶è—</span>
                    <!-- <el-button @click="showAddDialog = true">æ·»åŠ é“¾æ¥ï¼ˆæœ¬åœ°ç¼“å­˜ï¼‰</el-button>
                    <el-button @click="exportExcel">å¯¼å‡ºExcel</el-button>
                    <el-button @click="clean">æ¢å¤ç½‘ç«™</el-button> -->
                </h1>
            </div>
        </div>
        <div class="navbody">
            <div v-if="input" style="padding: 20px;">
                <h2 style="margin-bottom: 16px;" class="sreachtext">å…±æŸ¥è¯¢å‡º <span style="color: #f00;">{{searchlists.length}} </span> æ¡æ•°æ®</h2>
                <div>
                    <el-row :gutter="16" >
                        <el-col :xs="8" :sm="6" :md="4" :lg="4" :xl="3" v-for="(item,idx) in searchlists" :key="idx">
                            <div class="grid-content ep-bg-purple" :title="`åç§°ï¼š${item.title} &#10;æè¿°ï¼š${item.desc}`">
                                <a :href="item.url" target="_blank">
                                    <div class="appimg">
                                        <img :src="item.imgurl" alt="">
                                    </div>
                                    <div class="app_bg">
                                        <img :src="item.imgurl" alt="">
                                    </div>
                                    <div class="app_text">
                                        <div class="grid-content_title" v-html="highlightText(item.title, input)">
                                            {{item.title}}
                                        </div>
                                        <div class="desctext" v-html="highlightText(item.desc, input)">
                                            {{item.desc}} 
                                        </div>
                                    </div>
                                </a>
                            </div>
                        </el-col>
                    </el-row>
                </div>
                
            </div>
            <el-tabs v-else v-model="activeName" class="demo-tabs navtab" tab-position="left" @tab-click="handleClick">
                <el-tab-pane 
                    v-for="cat in categoryList" 
                    :key="cat.id" 
                    :label="cat.label" 
                    :name="cat.id">
                    <div class="navbody-box">
                        <el-scrollbar class="noscoll">
                            <div class="nav_tab_body" v-for="(navs,index) in cat.list" :key="index" >
                                <div class="title" >{{navs.title}} </div>
                                <el-row :gutter="16" >
                                    <el-col :xs="8" :sm="6" :md="4" :lg="4" :xl="3" v-for="(item,idx) in navs.children" :key="idx">
                                        <div class="grid-content ep-bg-purple" :title="`åç§°ï¼š${item.title} &#10;æè¿°ï¼š${item.desc}`">
                                            <a :href="item.url" target="_blank">
                                                <div class="appimg">
                                                    <img :src="item.imgurl" alt="">
                                                </div>
                                                <div class="app_bg">
                                                    <img :src="item.imgurl" alt="">
                                                </div>
                                                <div class="app_text">
                                                    <div class="grid-content_title">
                                                        {{item.title}}
                                                    </div>
                                                    <div class="desctext">
                                                        {{item.desc}} 
                                                    </div>
                                                </div>
                                            </a>
                                            <div class="delicon" @click.stop="deleteLink(cat.id, navs.title, item)">Ã—</div>
                                        </div>
                                    </el-col>
                                </el-row>
                            </div>
                        </el-scrollbar>
                    </div>
                </el-tab-pane>
            </el-tabs>
        </div>
        <div :class="isShowlastpage?'gg_box gg_open':'gg_box'" v-if="false">
            <span class="gg_label" v-show="isShowlastpage" @click="isShowlastpage=false">æœ€è¿‘ä¸Šæ–°</span>
            <div class="gg_box_header">
                <h2>æœ€è¿‘ä¸Šæ–°</h2>
                <span>
                    <i class="icon iconfont icon-guanbi1" @click="isShowlastpage=true"></i>
                </span>
            </div>
            <ul>
                <li v-for="(item ,index) in lastapp" :key="item">
                    <div class="lastapp-item" :title="`åç§°ï¼š${item.title} &#10;æè¿°ï¼š${item.desc}`">
                        <a :href="item.url" target="_blank">
                            <div class="appimg">
                                <img :src="item.imgurl" alt="">
                            </div>
                            <div class="app_bg">
                                <img :src="item.imgurl" alt="">
                            </div>
                            <div class="app_text">
                                <div class="grid-content_title">
                                    {{item.title}}
                                </div>
                                <div class="desctext">
                                    {{item.desc}}
                                </div>
                            </div>
                        </a>
                    </div>
                </li>
            </ul>
        </div>
        <div style="position: fixed; bottom:60px;right:0">
           <div style="font-size: 12px;margin-bottom: 8px;text-align: center;letter-spacing: 2px;">å»ºè®®æ·»åŠ é“¾æ¥</div> 
            <a target="_blank" href="https://qm.qq.com/cgi-bin/qm/qr?k=fjDFCuNRXjRmFIWBllfg0k_EtpJ_PTcp&jump_from=webapi&authKey=6wclgcMhp7+WEVYoinsU+KxtuKlhvkTcn6tb8RIgwQfN/Gqw2OVYpOdQY3WtjPmx"><img border="0" src="//pub.idqqimg.com/wpa/images/group.png" alt="cattool é“¾æ¥å¯¼èˆªå¢åˆ äº¤" title="cattool é“¾æ¥å¯¼èˆªå¢åˆ äº¤"></a>
        </div>
        <el-dialog 
            title="æ·»åŠ æ–°é“¾æ¥" 
            v-model="showAddDialog" 
            width="40%"
            @close="addForm = {
                password: '',
                category: '',
                subCategory: '',
                title: '',
                imgurl: '',
                desc: '',
                url: ''
            }">
            <el-form :model="addForm" label-width="100px">
                <el-form-item label="åˆ†ç±»" prop="category">
                    <el-select v-model="addForm.category" placeholder="è¯·é€‰æ‹©åˆ†ç±»">
                        <div @click="showNewCategoryDialog = true" class="linkselect">æ–°å¢åˆ†ç±»</div>
                        <el-option 
                            v-for="cat in categoryList" 
                            :key="cat.id"
                            :label="cat.label"
                            :value="cat.id">
                        </el-option>
                       
                    </el-select>
                </el-form-item>
                <el-form-item label="å­æ ‡ç­¾" prop="subCategory">
                    <el-select v-model="addForm.subCategory" placeholder="è¯·é€‰æ‹©å­æ ‡ç­¾">
                        <div @click="showNewSubDialog = true" class="linkselect">æ–°å¢å­æ ‡ç­¾</div>
                        <el-option 
                            v-for="(sub, index) in getSubCategories" 
                            :key="subIndex"
                            :label="sub.title"
                            :value="sub.title">
                        </el-option>
                    </el-select>
                </el-form-item>
                <el-form-item label="é“¾æ¥åç§°" prop="title">
                    <el-input v-model="addForm.title"></el-input>
                </el-form-item>
                <el-form-item label="é“¾æ¥å›¾ç‰‡" prop="imgurl">
                    <el-input v-model="addForm.imgurl" placeholder="è¾“å…¥å›¾ç‰‡URL"></el-input>
                </el-form-item>
                <el-form-item label="é“¾æ¥æè¿°" prop="desc">
                    <el-input v-model="addForm.desc" type="textarea"></el-input>
                </el-form-item>
                <el-form-item label="é“¾æ¥åœ°å€" prop="url">
                    <el-input v-model="addForm.url" placeholder="è¾“å…¥http/httpsåœ°å€"></el-input>
                </el-form-item>
            </el-form>
            <template #footer>
                <el-button @click="showAddDialog = false">å–æ¶ˆ</el-button>
                <el-button type="primary" @click="handleAddSubmit">ç¡®å®šæ·»åŠ </el-button>
            </template>
        </el-dialog>
        <el-dialog title="æ–°å¢åˆ†ç±»" v-model="showNewCategoryDialog" width="400px">
            <el-form :model="newCategoryForm">
                <el-form-item label="åˆ†ç±»åç§°" prop="name">
                    <el-input v-model="newCategoryForm.name"></el-input>
                </el-form-item>
            </el-form>
            <template #footer>
                <el-button @click="showNewCategoryDialog = false">å–æ¶ˆ</el-button>
                <el-button type="primary" @click="handleNewCategory">ç¡®è®¤æ·»åŠ </el-button>
            </template>
        </el-dialog>
        
        <el-dialog title="æ–°å¢å­æ ‡ç­¾" v-model="showNewSubDialog" width="400px">
            <el-form :model="newSubForm">
                <el-form-item label="å­æ ‡ç­¾åç§°" prop="name">
                    <el-input v-model="newSubForm.name"></el-input>
                </el-form-item>
            </el-form>
            <template #footer>
                <el-button @click="showNewSubDialog = false">å–æ¶ˆ</el-button>
                <el-button type="primary" @click="handleNewSub">ç¡®è®¤æ·»åŠ </el-button>
            </template>
        </el-dialog>
    </div>
</body>

</html>
<script src="./static/js/data.js?v20250812900"></script>
<script src="./static/data/logdata.js"></script>
<script>
    const App = {
        setup() {
            const { proxy } = getCurrentInstance();
            const { computed} = Vue;
            function initState() {
                return {
                    input :'',
                    activeName:'1',

                    // è¿‘æœŸä¸Šæ–°
                    lastapp:lastapps,
                    isShowlastpage:true,
                    srcList:srcLists,
                    url:srcLists[0],
                    searchlists:[],
                    isDark: localStorage.getItem('theme') === 'dark',
                    showAddDialog: false,
                    addForm: {
                        category: '',
                        subCategory: '',
                        title: 'ç™¾åº¦',
                        imgurl: 'https://bkimg.cdn.bcebos.com/pic/5d6034a85edf8db177f09dce0723dd54574e74ba',
                        desc: 'ç™¾åº¦æœç´¢',
                        url: 'https://www.baidu.com/'
                    },
                    showNewCategoryDialog: false,
                    showNewSubDialog: false,
                    newCategoryForm: { name: '' },
                    newSubForm: { name: '' },
                    
                }
            }
            const state = reactive(initState());
            // åˆå§‹åŒ–æ—¶åº”ç”¨ä¸»é¢˜
            onMounted(() => {
                document.documentElement.classList.toggle('dark-theme', state.isDark);
                // åŠ è½½åˆ†ç±»æ•°æ®
                const storedCategories = localStorage.getItem('cattool_categories');
                if (storedCategories) {
                    categoryList.splice(0, categoryList.length, ...JSON.parse(storedCategories));
                }
                loadLocalStorageData();  // æ–°å¢ç¼“å­˜æ•°æ®åŠ è½½
            });
            const categoryList = Vue.reactive([
                { id: '1', label: 'å®ç”¨å·¥å…·', list: navLists },
                { id: '2', label: 'è®¾è®¡ç©ºé—´', list: designspaces },
                { id: '3', label: 'é‡Šæ”¾å¤§æ‹›', list: skillLists },
                { id: '4', label: 'è½¯ä»¶ä¸‹è½½', list: softwarelist },
                { id: '5', label: 'åŸºç¡€æ•™ç¨‹', list: studylists },
                { id: '6', label: 'è®¾è®¡è§„èŒƒ', list: designnorm },
                { id: '7', label: 'å›¾æ ‡ä¸“æ ', list: iconDesigns },
                { id: '8', label: 'å¯è§†è®¾è®¡', list: viewlist },
                { id: '9', label: 'ç¼–ç¨‹å·¥å…·', list: devlist },
                { id: '10', label: 'æ•°æ®ä¸­å¿ƒ', list: datalists },
                { id: '11', label: 'äº§å“ç»ç†', list: PMlists },
                { id: '12', label: 'AIç§‘æŠ€', list: AIlists },
                { id: '13', label: 'SDæ¨¡å‹', list: SDlists },
                { id: '14', label: 'VIPé€šé“', list: viplists },
                { id: '15', label: 'MACå·¥å…·ç®±', list: mactools },
                { id: '16', label: 'ç½‘ç«™æ¬£èµ', list: webLists },
                { id: '17', label: 'è‡ªå­¦ç©ºé—´', list: selfstudylists },
                { id: '18', label: 'è¶£å‘³AI', list: ai2025lists },
                { id: '19', label: 'åŠ¨æ•ˆç«™ç‚¹', list: effectweblists },
                { id: '20', label: 'è‡ªåª’ä½“è¿è¥', list: selfmedialists  },
                { id: '21', label: 'æå‰¯ä¸š', list: Salelists  },
            ]);
            const newName = computed(() => {
                  
            })
            const clean = () => {
                localStorage.removeItem('cattool_links');
                localStorage.removeItem('cattool_categories');
                proxy.$message.success('ç¼“å­˜å·²æ¸…é™¤ï¼Œå³å°†åˆ·æ–°é¡µé¢');
                setTimeout(() => window.location.reload(), 1000);
            }
            const formRules = {
                category: [{ required: true, message: 'è¯·é€‰æ‹©åˆ†ç±»', trigger: 'change' }],
                subCategory: [{ required: true, message: 'è¯·é€‰æ‹©å­æ ‡ç­¾', trigger: 'change' }],
                title: [{ required: true, message: 'è¯·è¾“å…¥é“¾æ¥åç§°', trigger: 'blur' }],
                imgurl: [{ required: true, message: 'è¯·è¾“å…¥å›¾ç‰‡åœ°å€', trigger: 'blur' }],
                desc: [{ required: true, message: 'è¯·è¾“å…¥é“¾æ¥æè¿°', trigger: 'blur' }],
                url: [
                    { required: true, message: 'è¯·è¾“å…¥é“¾æ¥åœ°å€', trigger: 'blur' },
                    { type: 'url', message: 'è¯·è¾“å…¥æœ‰æ•ˆçš„URLåœ°å€', trigger: 'blur' }
                ]
            };
            // æ–°å¢ç¼“å­˜æ•°æ®åŠ è½½æ–¹æ³•
            function loadLocalStorageData() {
                const storedData = JSON.parse(localStorage.getItem('cattool_links') || '[]');
                storedData.forEach(item => {
                    const category = categoryList.find(c => c.id === item.category);
                    const subCategory = category?.list.find(g => g.title === item.subCategory);
                    if (subCategory) {
                        // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨ç›¸åŒæ¡ç›®
                        const exists = subCategory.children.some(child => 
                            child.title === item.title && 
                            child.url === item.url
                        );
                        if (!exists) {
                            subCategory.children.push({
                                title: item.title,
                                desc: item.desc,
                                url: item.url,
                                imgurl: item.imgurl
                            });
                        }
                    }
                });
            }
            const getSubCategories = computed(() => {
                const category = categoryList.find(c => c.id === state.addForm.category);
                 // åº”è¯¥è¿”å›äºŒçº§åˆ†ç±»çš„åˆ†ç»„æ ‡é¢˜åˆ—è¡¨
                return category?.list.map(item => ({
                    title: item.title,
                    id: item.title // ä½¿ç”¨åˆ†ç»„æ ‡é¢˜ä½œä¸ºå”¯ä¸€æ ‡è¯†
                })) || [];
            });
            function handleAddSubmit() {
                
                // æ‰¾åˆ°å¯¹åº”çš„åˆ†ç±»å’Œå­åˆ†ç±»
                const category = categoryList.find(c => c.id === state.addForm.category);
                // é€šè¿‡åˆ†ç»„æ ‡é¢˜æŸ¥æ‰¾å¯¹åº”åˆ†ç»„
                const subCategory = category?.list.find(
                    item => item.title === state.addForm.subCategory
                );
                
                if (subCategory && subCategory.children) {
                    // åˆ›å»ºæ–°é“¾æ¥å¯¹è±¡
                    const newLink = {
                        title: state.addForm.title,
                        desc: state.addForm.desc,
                        url: state.addForm.url,
                        imgurl: state.addForm.imgurl
                    };
                    subCategory.children.push(newLink);
                    // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
                    saveToLocalStorage(newLink);
                    proxy.$message.success('æ·»åŠ æˆåŠŸ');
                    state.showAddDialog = false; 
                } else {
                    proxy.$message.error('æ·»åŠ å¤±è´¥ï¼Œè¯·æ£€æŸ¥åˆ†ç±»é€‰æ‹©');
                }
            }
            // æ–°å¢æœ¬åœ°å­˜å‚¨æ–¹æ³•
            function saveToLocalStorage(newLink) {
                const storedData = JSON.parse(localStorage.getItem('cattool_links') || '[]');
                storedData.push({
                    ...newLink,
                    category: state.addForm.category,
                    subCategory: state.addForm.subCategory
                });
                localStorage.setItem('cattool_links', JSON.stringify(storedData));
            }
            // æ–°å¢å¯¼å‡ºExcelæ–¹æ³•
            function exportExcel() {
                /* åˆ›å»ºå·¥ä½œè¡¨ */
                const data = categoryList.flatMap(cat => 
                    cat.list.flatMap(group => 
                        group.children.map(item => ({
                            åˆ†ç±»: cat.label,
                            å­åˆ†ç±»: group.title,
                            åç§°: item.title,
                            æè¿°: item.desc,
                            é“¾æ¥: item.url,
                            å›¾ç‰‡: item.imgurl
                        }))
                    )
                );
                
                // åˆå¹¶æœ¬åœ°å­˜å‚¨æ•°æ®
                const storedData = JSON.parse(localStorage.getItem('cattool_links') || '[]');
                storedData.forEach(item => {
                    data.push({
                        åˆ†ç±»: categoryList.find(c => c.id === item.category)?.label || 'æœªçŸ¥åˆ†ç±»',
                        å­åˆ†ç±»: item.subCategory,
                        åç§°: item.title,
                        æè¿°: item.desc,
                        é“¾æ¥: item.url,
                        å›¾ç‰‡: item.imgurl
                    });
                });

                const worksheet = XLSX.utils.json_to_sheet(data);

                // æ–°å¢åˆ—å®½è®¾ç½®ï¼ˆåŸºäºå­—ç¬¦å®½åº¦è®¡ç®—ï¼Œçº¦1å­—ç¬¦=7åƒç´ ï¼‰
                worksheet['!cols'] = [
                    { wch: 25 },  // åˆ†ç±»åˆ— (25*7â‰ˆ175px)
                    { wch: 25 },  // å­åˆ†ç±»åˆ—
                    { wch: 25 },  // åç§°åˆ—
                    { wch: 72 },  // æè¿°åˆ— (72*7â‰ˆ500px)
                    { wch: 86 },  // é“¾æ¥åˆ— (86*7â‰ˆ600px)
                    { wch: 40 }   // å›¾ç‰‡åˆ—
                ];
                const workbook = XLSX.utils.book_new();
                XLSX.utils.book_append_sheet(workbook, worksheet, "é“¾æ¥æ•°æ®");
                
                /* ç”Ÿæˆæ–‡ä»¶å¹¶ä¸‹è½½ */
                XLSX.writeFile(workbook, "cattool_links.xlsx");
            }
            
            function toggleTheme() {
                state.isDark = !state.isDark;
                localStorage.setItem('theme', state.isDark ? 'dark' : 'light');
                document.documentElement.classList.toggle('dark-theme', state.isDark);
            }
            // ä¿®æ”¹è¿‡æ»¤é€»è¾‘éƒ¨åˆ†
            const filteredCategory = computed(() => 
                categoryList.map(cat => ({
                    ...cat,
                    list: filterList(cat.list, state.input)
                }))
            );
            // æ–°å¢æœç´¢ç»“æœè®¡ç®—å±æ€§
            const searchResults = computed(() => {
                return categoryList.flatMap(cat => 
                    filterList(cat.list, state.input)
                        .flatMap(group => group.children || [])
                );
            });
            // ä¿®æ”¹å¤„ç†æœç´¢çš„æ–¹æ³•
            function handleSearch(val) {
                state.input = val.toLowerCase();
                state.searchlists = searchResults.value;  // æ›´æ–°æœç´¢ç»“æœåˆ—è¡¨
            }
            
            // æ·»åŠ è¿‡æ»¤è®¡ç®—å±æ€§
            const filteredLists = Vue.computed(() => ({
                navList: filterList(navLists, state.input),
                designspace: filterList(designspaces, state.input),
                // é‡å¤æ·»åŠ å…¶ä»–éœ€è¦è¿‡æ»¤çš„åˆ—è¡¨...
                studylist: filterList(studylists, state.input),
                skillList: filterList(skillLists, state.input),
                // å…¶ä»–åˆ—è¡¨è¿‡æ»¤é€»è¾‘åŒä¸Š...
            }));

            // åˆ—è¡¨è¿‡æ»¤æ–¹æ³•
            function filterList(list, keyword) {
                if (!keyword) return list;
                return list.filter(group => {
                    return group?.title?.toLowerCase().includes(keyword) ||  // æ·»åŠ å¯é€‰é“¾æ“ä½œç¬¦
                        group?.children?.some(item =>  // æ·»åŠ å¯é€‰é“¾æ“ä½œç¬¦
                            item?.title?.toLowerCase().includes(keyword) || 
                            item?.desc?.toLowerCase().includes(keyword)
                        );
                }).map(group => ({
                    ...group,
                    children: group.children?.filter(item =>  // æ·»åŠ å¯é€‰é“¾æ“ä½œç¬¦
                        item?.title?.toLowerCase().includes(keyword) || 
                        item?.desc?.toLowerCase().includes(keyword)
                    )
                }));
            }
            function handleClick (tab, event) {
                console.log(tab, event)
            }
            function highlightText(text, keyword) {
                if (!keyword || !text) return text;
                const regex = new RegExp(`(${keyword})`, 'gi');
                return text.replace(regex, '<span class="highlight">$1</span>');
            }
            function deleteLink(categoryId, subCategoryTitle, item) {
                const category = categoryList.find(c => c.id === categoryId);
                const subCategory = category?.list.find(g => g.title === subCategoryTitle);
                
                if (subCategory) {
                    const index = subCategory.children.findIndex(child => 
                        child.title === item.title && 
                        child.url === item.url
                    );
                    if (index > -1) {
                        subCategory.children.splice(index, 1);
                        // æ›´æ–°åˆ†ç±»ç»“æ„ç¼“å­˜
                        localStorage.setItem('cattool_categories', JSON.stringify(categoryList));
                    }
                    
                    // åŸæœ‰é“¾æ¥ç¼“å­˜æ¸…ç†é€»è¾‘...
                    const storedData = JSON.parse(localStorage.getItem('cattool_links') || '[]');
                    const filtered = storedData.filter(link => 
                        !(link.category === categoryId &&
                        link.subCategory === subCategoryTitle &&
                        link.title === item.title &&
                        link.url === item.url)
                    );
                    localStorage.setItem('cattool_links', JSON.stringify(filtered));
                    
                    proxy.$message.success('åˆ é™¤æˆåŠŸ');
                }
            }
            function handleNewCategory() {
                if (!state.newCategoryForm.name) {
                    proxy.$message.error('è¯·è¾“å…¥åˆ†ç±»åç§°');
                    return;
                }
                
                const newId = (categoryList.length + 1).toString();
                categoryList.push({
                    id: newId,
                    label: state.newCategoryForm.name,
                    list: []
                });
                
                state.showNewCategoryDialog = false;
                state.newCategoryForm.name = '';
                proxy.$message.success('åˆ†ç±»æ·»åŠ æˆåŠŸ');
                localStorage.setItem('cattool_categories', JSON.stringify(categoryList));
            }

            function handleNewSub() {
                if (!state.addForm.category) {
                    proxy.$message.error('è¯·å…ˆé€‰æ‹©åˆ†ç±»');
                    return;
                }
                if (!state.newSubForm.name) {
                    proxy.$message.error('è¯·è¾“å…¥å­æ ‡ç­¾åç§°');
                    return;
                }
                
                const category = categoryList.find(c => c.id === state.addForm.category);
                if (category) {
                    category.list.push({
                        title: state.newSubForm.name,
                        children: []
                    });
                    state.showNewSubDialog = false;
                    state.newSubForm.name = '';
                    proxy.$message.success('å­æ ‡ç­¾æ·»åŠ æˆåŠŸ');
                }
                localStorage.setItem('cattool_categories', JSON.stringify(categoryList));
            }
            return {
                ...toRefs(state),
                getSubCategories, // æš´éœ²è®¡ç®—å±æ€§
                handleAddSubmit,
                toggleTheme,
                highlightText, // æš´éœ²é«˜äº®æ–¹æ³•
                handleClick,
                handleSearch,  // æš´éœ²æœç´¢æ–¹æ³•
                categoryList: filteredCategory,  // æš´éœ²è¿‡æ»¤åçš„åˆ—è¡¨
                exportExcel,
                deleteLink,  // æš´éœ²åˆ é™¤æ–¹æ³•
                handleNewCategory,
                handleNewSub,
                clean,  // æš´éœ²æ¸…ç†æ–¹æ³•
            }
        }
    }
    mountApp(App);
</script>
<script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?d7a45917737db687fa00c6addb47e3b2";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>
    